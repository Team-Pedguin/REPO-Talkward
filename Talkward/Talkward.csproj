<Project Sdk="Microsoft.NET.Sdk">
    <PropertyGroup>
        <TargetFramework>netstandard2.1</TargetFramework>
        <Version>0.1.0</Version>

        <RepoGameDir Condition="'$(RepoGameDir)'==''">C:\SteamLibrary\steamapps\common\REPO</RepoGameDir>
        <RepoGameDataDir>$(RepoGameDir)\REPO_Data\Managed</RepoGameDataDir>
        
        <ILRepackTargetsFile>$(MSBuildThisFileDirectory)ILRepack.targets</ILRepackTargetsFile>
        <NoWarn>CS1685</NoWarn>
    </PropertyGroup>

    <ItemGroup>
        <PackageReference Include="System.Runtime.CompilerServices.Unsafe" Version="6.1.0" />
        <PackageReference Include="TwitchLib" Version="3.5.3" />
        <PackageReference Include="Zehs.REPOLib" Version="1.4.1"/>
        <PackageReference Include="JetBrains.Annotations" Version="2024.3.0" Aliases="private" PrivateAssets="all"/>
        <PackageReference Include="BepInEx.Unity.Mono" Version="6.0.0-be.*" IncludeAssets="compile"/>
        <PackageReference Include="BepInEx.PluginInfoProps" Version="2.1.0" PrivateAssets="all"/>
        <PackageReference Include="UnityEngine.Modules" Version="2022.3.21" IncludeAssets="compile"/>
    </ItemGroup>
    
    <ItemGroup>
      <ProjectReference Include="..\Talkward.Polyfills\Talkward.Polyfills.csproj">
          <Private>True</Private>
      </ProjectReference>
    </ItemGroup>

    <Target Name="FindRepoGameDir" BeforeTargets="ResolveReferences">
        
        <SteamFindAppByIdTask AppId="3241660">
            <Output TaskParameter="Path" PropertyName="RepoGameDir"/>
        </SteamFindAppByIdTask>
        
        <PropertyGroup>
            <RepoGameDataDir>$(RepoGameDir)\REPO_Data\Managed</RepoGameDataDir>
        </PropertyGroup>

        <ItemGroup>
            <Reference Include="$(RepoGameDataDir)\Assembly-CSharp.dll" />
        </ItemGroup>
    </Target>
    
    <ItemGroup>
        <PackageReference Include="ILRepack.Lib.MSBuild.Task" Version="2.0.40">
            <PrivateAssets>all</PrivateAssets>
            <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
        </PackageReference>
        <PackageReference Include="Finder.MsBuild.Task" Version="1.0.5" PrivateAssets="all"/>
    </ItemGroup>
</Project>
